{% extends "base.html" %}
{% load static %}

{% block title %} Skorlar {% endblock %}


{% block content %} 
<br><br>
<div class="container new mt-3 mb-4 border-white">
    <div class="row border-black">
        <h5 class="text-center table-title mt-4">SKOR TABLOLARI</h5>
        <div class="alert alert-success text-center mt-4" id="foralert"></div>
        <div class="row ">
           <div class="col-sm-4">
              <table class="table table-sm">
                 <thead>
                    <th>Kullanıcı Adı</th>
                    <th>Besleme</th>
                 </thead>
                 <tbody>
                    <tr id = 'besleme'></tr>
                 </tbody>
              </table>
           </div>
           <div class="col-sm-4">
              <table class="table table-sm">
                 <thead>
                    <th>Kullanıcı Adı</th>
                    <th>Yuva Bildirme</th>
                 </thead>
                 <tbody>
                    <tr id="bildirme"></tr>
                 </tbody>
              </table>
           </div>
           <div class="col-sm-4">
              <table class="table table-sm">
                 <thead>
                    <th>Kullanıcı Adı</th>
                    <th>Mama(gr)</th>
                 </thead>
                 <tbody>
                    {% for data in mamakg %}
                    <tr id="mama"></tr>
                    {% endfor %}
                 </tbody>
              </table>
           </div>
        </div>
     </div>
</div>
<script>
    async function getData(){
        const response = await fetch('https://agile-basin-70896.herokuapp.com/rest/persons/')
        if (response.status==200){
            const data = await response.json()
            for (let i = 0; i < data['besle'].length; i++) {
                $('#besleme').append('<td class="text-center">'+data['besle'][i]['username']+'</td><td class="text-center">'+data['besle'][i]['beslemesayisi']+'</td>')
                $('#bildirme').append('<td class="text-center">'+data['bildir'][i]['username']+'</td><td class="text-center">'+data['bildir'][i]['beslemesayisi']+'</td>')
                $('#mama').append('<td class="text-center">'+data['mama'][i]['username']+'</td><td class="text-center">'+data['mama'][i]['beslemesayisi']+'</td>')
            }
        }
        else {
            $('#foralert').append('<div>Bir hata oluştu.</div>')
        }
        
        
    }   
</script>
{% endblock %}


